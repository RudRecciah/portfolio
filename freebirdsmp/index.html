<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Meta tags -->
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
        <meta name="keywords" content="freebird, rudrecciah, endcraft, kan gao, smp, minecraft, roleplay, rp, mc, to the moon, finding paradise, impostor factory, freebird games" />
        <meta name="description" content="Minecraft and things." />
        <meta name="author" content="RudRecciah" />
        <!-- Favicon and title -->
        <link rel="icon" href="./ico.png">
        <title>Freebird SMP</title>
        <!-- CSS -->
        <link href="https://cdn.jsdelivr.net/npm/halfmoon@1.1.1/css/halfmoon-variables.min.css" rel="stylesheet" />
        <link href="./style.css" rel="stylesheet" />
    </head>
    <body class="with-custom-webkit-scrollbars with-custom-css-scrollbars dark-mode" data-dm-shortcut-enabled="true" data-sidebar-shortcut-enabled="true">
        <!-- Modals go here -->
        <div class="page-wrapper">
            <div class="sticky-alerts">
                <!-- Toasts go here -->
            </div>
            <div class="content-wrapper bg-primary">
                <div class="content">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col text-center">
                                <img src="fl.png" class="img-fluid rh-500" alt="shits fucked pls reload">
                            </div>
                        </div>
                        <div class="aespacer"></div>
                        <div class="row">
                            <div class="col">
                                <div class="card bg-white text-primary">
                                    <h1 class="card-title text-center">
                                        FreebirdSMP
                                    </h1>
                                    <!-- TODO: YOUTUBE CHANNEL LINK -->
                                    <p class="text-center">
                                        A small, invite only Minecraft server built for <b><a href="https://discord.com/invite/MDxRZCx">this Discord server</a></b>. Looking to see what we do? Check out some of our <b><a href="#">videos</a></b>! We roleplay, host events, and enslave villagers for economical gain. Want to join? We accept most active members of <b><a href="https://discord.com/invite/MDxRZCx">said Discord server</a></b>, as well as people recommended from other server members. Because of our involvment with roleplay aspects, you will have a canonical part. This doesn't mean you will have to actually be involved in the storyline; if you want to just play we have parts that don't have much involvment in the plot. Looking for more information? DM me on Discord<br><span class="text-monospace">@RudRecciah#5681 (id=246080207704817664)</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-6 col-md-12">
                                <div class="card bg-white text-primary">
                                    <h1 class="card-title text-center">
                                        Players
                                    </h1>
                                    <!-- TODO: Set up info page -->
                                    <!-- Player Card (name, head, extended info button) -->
                                    <div class="card bg-primary text-white">
                                        <div class="row">
                                            <div class="col-8">
                                                <div class="row">
                                                    <p class="text-truncate m-10">
                                                        xXxNoobSlayer42069GamerPro360noscopexXx
                                                    </p>
                                                </div>
                                                <div class="row w-full">
                                                    <div class="w-full">
                                                        <a href="#" class="btn btn-primary bg-white text-primary w-full">
                                                            Player info
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-4">
                                                <div class="text-right">
                                                    <img src="https://minotar.net/avatar/rudrecciah/100.png" class="img-fluid rounded" alt="shits fucked pls reload">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-12">
                                <div class="card bg-white text-primary">
                                    <h1 class="card-title text-center">
                                        Statistics
                                    </h1>
                                    <p class="text-center">
                                        Some stats.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <div class="card bg-white text-white text-center">
                                    <a href="../" class="btn btn-primary">Back</a>
                                </div>
                                <div class="card bg-white text-white text-center">
                                    <a href="../bugs/" class="btn btn-primary">Report A Bug</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Halfmoon JS -->
        <script src="https://cdn.jsdelivr.net/npm/halfmoon@1.1.1/js/halfmoon.min.js"></script>
        <script src="https://kit.fontawesome.com/d1e8146998.js" crossorigin="anonymous"></script>
        <!-- JS EXAMPLE FOR CQS 
        chehk eit awt moate https://rudrecciah.dev/customquerystats/
        -->
        <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
        <script>
            var dataObj = {};
            getStats();

            function getStats() {
                //queries server using mc server stats api
                $.getJSON('https://api.mcsrvstat.us/2/freebird.endcraft.org', function(query) {
                    //parses data
                    parseData(query);
                });
            }

            function parseData(workingQuery) {
                //gets motd from output (in this case, mc server status outputs as a JSON)
                var motd = workingQuery.motd.clean;
                //gets data from motd (plugin adds data on a line 2 lines down from the last line of the motd, in my case the 4th line)
                var data = motd[3];

                //removes motd wrapper and gets time/stats from motd
                var dataSplit = data.split("%q%");
                var infoSplit = dataSplit[1].split("%w%");
                var date = infoSplit[0];
                var stats = infoSplit[1];

                //removes stats wrapper and gets each player's stats
                var statsSplit = stats.split("%e%");
                var playerName = statsSplit[0];
                var playerSplit = statsSplit[1].split("%r%");

                //processes data 
                playerSplit.forEach(processData);

                //handles data after processing
                handleData(dataObj);
            }

            function processData(playeritem, playerindex) {

                //because stats are wrapped, there's 2 variables between each stat which means every other item in the array will be blank, so items that are blank are filtered out
                if(playeritem.length > 0) {

                    //splits playerdata into name/statistics, creates array to store translated data inside of
                    var itemSplit = playeritem.split("%t%");
                    var itemName = itemSplit[0];
                    var statObjArr = [];
                    var itemStats = itemSplit[1];

                    //splits statistics into each specific individual statistic and filters out blank items in the array for the same reason as above, then processes the individual statistics
                    var itemStatsSplit = itemStats.split("%y%");
                    itemStatsSplit.forEach(element => {
                        if(element.length > 0) {

                            //splits statistics into identifier/value
                            var elementSplit = element.split("%u%");
                            var statKey = elementSplit[0];
                            var statValue = elementSplit[1];

                            //stores raw statistic data in an object, translating it
                            var statObjArrObj = {key:statKey, statValue:statValue}

                            //stores object in array containing all translated statistics
                            statObjArr.push(statObjArrObj);
                        }
                    });
                }

                //stores name of player and translated value array in an object (this is the object to use when handling and using the data)
                dataObj[itemName] = statObjArr;

                //removes any undefined properties in the object
                delete dataObj.undefined;
            }

            function handleData() {
                //handle data here
            }
        </script>
        <!-- END OF JS EXAMPLE FOR CQS -->
    </body>
</html>